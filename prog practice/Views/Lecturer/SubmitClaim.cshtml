@model prog_practice.Models.Claim
@{
    ViewBag.Title = "Submit Claim";
}

<h2 style="text-align:center; color:black;">Submit Claim</h2>
<hr />

<div style="max-width:700px; margin:auto; background:#f9f9f9; border-radius:15px; padding:25px; box-shadow:0 4px 10px rgba(0,0,0,0.1); font-family:Arial, sans-serif;">
    @if (ViewBag.Error != null)
    {
        <div style="background:#f8d7da; color:#721c24; padding:10px; border-radius:8px;">@ViewBag.Error</div>
    }

    @using (Html.BeginForm("SubmitClaim", "Lecturer", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        <div style="margin-bottom:15px;">
            <label><b>Lecturer Name</b></label>
            @Html.TextBoxFor(m => m.LecturerName, new { @class = "form-control", style = "width:100%; padding:10px; border-radius:8px;" })
            @Html.ValidationMessageFor(m => m.LecturerName, "", new { @style = "color:red" })
        </div>

        <div style="margin-bottom:15px;">
            <label><b>Claim Title</b></label>
            @Html.TextBoxFor(m => m.Title, new { @class = "form-control", style = "width:100%; padding:10px; border-radius:8px;" })
            @Html.ValidationMessageFor(m => m.Title, "", new { @style = "color:red" })
        </div>

        <div style="margin-bottom:15px;">
            <label><b>Claim Date</b></label>
            @Html.TextBoxFor(m => m.ClaimDate, new { @class = "form-control", style = "width:100%; padding:10px; border-radius:8px;" })
            @Html.ValidationMessageFor(m => m.ClaimDate, "", new { @style = "color:red" })
        </div>

        <div style="margin-bottom:15px;">
            <label><b>Month</b></label>
            @Html.TextBoxFor(m => m.Month, new { placeholder = "e.g. October 2025", style = "width:100%; padding:10px; border-radius:8px;" })
            @Html.ValidationMessageFor(m => m.Month, "", new { @style = "color:red" })
        </div>

        <div style="margin-bottom:15px;">
            <label><b>Hours Worked</b></label>
            @Html.TextBoxFor(m => m.HoursWorked, new { id = "hours", type = "number", step = "0.1", style = "width:100%; padding:10px; border-radius:8px;" })
            @Html.ValidationMessageFor(m => m.HoursWorked, "", new { @style = "color:red" })
        </div>

        <div style="margin-bottom:15px;">
            <label><b>Hourly Rate (R)</b></label>
            @Html.TextBoxFor(m => m.HourlyRate, new { id = "rate", type = "number", step = "0.01", style = "width:100%; padding:10px; border-radius:8px;" })
            @Html.ValidationMessageFor(m => m.HourlyRate, "", new { @style = "color:red" })
        </div>

        <div style="margin-bottom:15px;">
            <label><b>Total Amount</b></label>
            <input type="text" id="total" readonly style="width:100%; padding:10px; border-radius:8px;" />
        </div>

        <div style="margin-bottom:15px;">
            <label><b>Description</b></label>
            @Html.TextAreaFor(m => m.Description, 3, 50, new { style = "width:100%; padding:10px; border-radius:8px;" })
        </div>

        <div style="margin-bottom:15px;">
            <label><b>Upload Document (optional)</b></label>
            <input type="file" name="ClaimDocument" />
            <p style="font-size:12px; color:gray;">Accepted: PDF, DOCX, JPG, PNG | Max 5MB</p>
        </div>

        <div style="text-align:center;">
            <button type="submit" onclick="return confirm('Are you sure you want to submit this claim?');"
                    style="background:#28a745; color:white; padding:12px 25px; border-radius:10px; border:none; font-weight:bold;">
                Submit Claim
            </button>
        </div>
    }
</div>

@section Scripts {
    <script>
        function calc() {
            var h = parseFloat(document.getElementById("hours").value) || 0;
            var r = parseFloat(document.getElementById("rate").value) || 0;
            var total = (h * r).toFixed(2);
            document.getElementById("total").value = "R " + total;
        }
        document.getElementById("hours").addEventListener("input", calc);
        document.getElementById("rate").addEventListener("input", calc);
    </script>
}

